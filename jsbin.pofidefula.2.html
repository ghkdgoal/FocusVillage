<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2025 by anonymous (http://jsbin.com/pofidefula/2/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í¬ì»¤ìŠ¤ ë¹Œë¦¬ì§€</title>
<link rel="stylesheet" href="style.css">
<style id="jsbin-css">
:root{
 --bg:#ffffff; --text:#0f172a; --muted:#6b7280;
 --accent:#34D399; --card:#fff; --radius:12px; --gap:14px;
 font-family: Inter, Pretendard, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);padding:24px}
.wrap{max-width:1000px;margin:0 auto}
header h1{margin:0;font-size:22px}
.lead{margin:4px 0 0 0;color:var(--muted);font-size:13px}
.category-tabs{display:flex;gap:6px;margin:12px 0}
.cat-btn{flex:1;padding:6px 0;border:1px solid #e6e9ee;border-radius:8px;background:#f9fafb;cursor:pointer}
.cat-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}

main{display:grid;grid-template-columns:1fr;gap:20px;margin-top:10px}
.panel{background:var(--card);padding:16px;border-radius:var(--radius);box-shadow:0 6px 18px rgba(15,23,42,0.04)}
.q{margin-bottom:12px}
.q-title{display:block;font-weight:600;margin-bottom:6px}
.options label{display:inline-block;margin-right:8px;font-size:14px}
textarea,input[type="text"],input[type="number"],input[type="password"]{
  width:100%;padding:10px;border-radius:10px;border:1px solid #e6e9ee;margin-bottom:6px;
  /* í†µê³„ íŒ¨ë„ì˜ input ê²¹ì¹˜ì§€ ì•Šë„ë¡ */
  box-sizing: border-box; 
}
.actions{display:flex;gap:8px;margin-top:8px}
.btn{padding:8px 12px;border-radius:10px;border:0;cursor:pointer}
.btn.primary{background:var(--accent);color:#fff}
.btn.ghost{background:transparent;border:1px solid #e6e9ee}

/* í¬ìŠ¤íŠ¸ì‡ ìƒ‰ìƒ ë³€ê²½ ë° ìŠ¤íƒ€ì¼ ê°œì„  */
.postit{
    background: #f7f7f7; /* ë°ì€ íšŒìƒ‰ ê³„ì—´ */
    border-radius: 8px;
    padding: 12px; /* íŒ¨ë”© ì¦ê°€ */
    margin-bottom: 10px;
    border: 1px solid rgba(0,0,0,0.08); /* í…Œë‘ë¦¬ ê°•í™” */
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); /* ê·¸ë¦¼ì ì¶”ê°€ */
    cursor: pointer;
    transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out; /* í˜¸ë²„ íš¨ê³¼ */
}
.postit:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.08);
}
.postit .meta{font-size:12px;color:var(--muted);margin-top:8px;display:flex;justify-content:space-between;align-items:center}
.postit .comment-list{margin-top:10px;border-top:1px dashed #f1f5f9;padding-top:8px}
.comment{padding:6px 8px;border-radius:6px;background:#fff;border:1px solid #f1f5f9;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center; font-size: 14px;}

/* ì‘ì„±ì ëŒ“ê¸€ ìŠ¤íƒ€ì¼ */
.comment.author-comment {
    background: #e6ffee; /* ì—°í•œ ì´ˆë¡ìƒ‰ ë°°ê²½ */
    border-color: var(--accent);
}

/* ëŒ“ê¸€ í¼ ë ˆì´ì•„ì›ƒ ê°œì„  */
.comment-form {
    display: flex;
    flex-wrap: wrap; /* ì‘ì€ í™”ë©´ì—ì„œ ì¤„ë°”ê¿ˆ */
    gap: 8px;
    align-items: center;
    margin-top: 10px;
    padding-top: 8px;
    border-top: 1px dashed #f1f5f9;
}
.comment-form input[type="text"], .comment-form input[type="password"] {
    flex: 1 1 auto; /* ìë™ìœ¼ë¡œ ê³µê°„ì„ ì±„ìš°ê³  í•„ìš”ì‹œ ì¤„ë°”ê¿ˆ */
    min-width: 100px; /* ë„ˆë¬´ ì‘ì•„ì§€ì§€ ì•Šë„ë¡ */
    margin-bottom: 0;
    padding: 6px;
    font-size: 13px;
}
.comment-form label {
    white-space: nowrap;
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 4px;
}
.comment-form label input[type="checkbox"] {
    margin-bottom: 0; /* ì²´í¬ë°•ìŠ¤ ë§ˆì§„ ì œê±° */
    width: auto; /* ì²´í¬ë°•ìŠ¤ ë„ˆë¹„ ìë™ */
}
.comment-form button {
    padding: 6px 10px;
    font-size: 13px;
    background: var(--accent);
    color: #fff;
    border-radius: 6px;
    cursor: pointer;
}

.small{font-size:13px;color:var(--muted)}
.foot-note{text-align:center;color:var(--muted);font-size:13px;margin-top:20px;}

/* í†µê³„ íŒ¨ë„ ìŠ¤íƒ€ì¼ */
.stats-panel {
    background: #f0f8ff; /* ì—°í•œ íŒŒë€ìƒ‰ ë°°ê²½ */
    border: 1px solid #d0e8ff;
    padding: 16px;
    border-radius: var(--radius);
    margin-bottom: 20px;
}
.stats-panel h3 {
    margin-top: 0;
    margin-bottom: 10px;
    color: #336699;
    font-size: 18px;
}
.stats-panel p {
    margin-bottom: 5px;
}
</style>
</head>
<body>
<div class="wrap">
 <header>
  <h1>í¬ì»¤ìŠ¤ ë¹Œë¦¬ì§€</h1>
  <p class="lead">ë‹¹ì‹ ì˜ ì§‘ì¤‘ ìŠµê´€ì„ ê¸°ë¡í•˜ê³ , ì„œë¡œì˜ íŒì„ ê³µìœ í•˜ëŠ” ê³µê°„</p>
 </header>

  <nav class="category-tabs">
  <button class="cat-btn active" data-cat="myRoutine">ë‚˜ì˜ ë£¨í‹´</button>
  <button class="cat-btn" data-cat="othersRoutine">ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ì–´ë–»ê²Œ ì‚´ê³  ìˆì„ê¹Œ?</button>
  <button class="cat-btn" data-cat="community">ì»¤ë®¤ë‹ˆí‹°</button>
 </nav>

 <main>
    <section class="panel" id="myRoutinePanel">
   <h2>ë‚˜ì˜ ë£¨í‹´ ì‘ì„±</h2>
   <form id="myRoutineForm">
        <div class="q">
     <label class="q-title">1) í‰ì†Œì— ì§‘ì¤‘ì„ ì˜ í•˜ëŠ” í¸ì¸ê°€ìš”?</label>
     <div class="options">
      <label><input type="radio" name="q1" value="ë§¤ìš° ê·¸ë ‡ë‹¤" required> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
      <label><input type="radio" name="q1" value="ê·¸ë ‡ë‹¤"> ê·¸ë ‡ë‹¤</label>
      <label><input type="radio" name="q1" value="ë³´í†µ"> ë³´í†µ</label>
      <label><input type="radio" name="q1" value="ê·¸ë ‡ì§€ ì•Šë‹¤"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
      <label><input type="radio" name="q1" value="ì „í˜€ ì•„ë‹ˆë‹¤"> ì „í˜€ ì•„ë‹ˆë‹¤</label>
     </div>
    </div>

        <div class="q">
     <label class="q-title">2) ì§‘ì¤‘ì„ í•˜ê¸° ì´ì „/ì´í›„ ë£¨í‹´ì´ ìˆë‚˜ìš”?</label>
     <textarea name="q2" placeholder="ì˜ˆ: ìŠ¤íŠ¸ë ˆì¹­ â†’ 25ë¶„ ì§‘ì¤‘ â†’ íœ´ì‹"></textarea>
    </div>
    <div class="q">
     <label class="q-title">3) ìµœëŒ€ ì§‘ì¤‘ ì‹œê°„ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”? (ë¶„ ë‹¨ìœ„)</label>
     <input type="number" name="q3" min="1" placeholder="ì˜ˆ: 25">
    </div>
    <div class="q">
     <label class="q-title">4) ì§‘ì¤‘í•˜ê¸° ìœ„í•œ ë‚˜ë§Œì˜ ë°©ë²•ì´ ìˆì„ê¹Œìš”?</label>
     <textarea name="q4" placeholder="ìì‹ ë§Œì˜ ì§‘ì¤‘ íŒ"></textarea>
    </div>
    <div class="q">
     <label class="q-title">5) ì§‘ì¤‘ì´ ì•ˆ ë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì´ë¼ê³  ìƒê°í•˜ì‹œë‚˜ìš”?</label>
     <textarea name="q5" placeholder="ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”."></textarea>
    </div>

    <div class="actions">
     <button type="submit" class="btn primary">ì œì¶œ</button>
     <button type="button" class="btn ghost" id="resetMyRoutine">ì´ˆê¸°í™”</button>
    </div>
   </form>
  </section>

    <section class="panel" id="othersRoutinePanel">
   <h2>ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ì–´ë–»ê²Œ ì‚´ê³  ìˆì„ê¹Œ?</h2>
      <div id="routineStats" class="panel stats-panel">
    <h3>ğŸ“Š ë£¨í‹´ í†µê³„</h3>
    <div id="statsContent" class="small">
     <p>ë£¨í‹´ ë°ì´í„°ê°€ ì¶©ë¶„ì¹˜ ì•ŠìŠµë‹ˆë‹¤.</p>
    </div>
   </div>
   <div id="othersRoutineBoard">
    <div class="small">ì•„ì§ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ë£¨í‹´ì´ ì—†ìŠµë‹ˆë‹¤.</div>
   </div>
  </section>

    <section class="panel" id="communityPanel">
   <h2>ì»¤ë®¤ë‹ˆí‹°</h2>
   <div id="postitForm">
    <input type="text" id="postNick" placeholder="ë‹‰ë„¤ì„ (ì„ íƒ)">
    <label><input type="checkbox" id="postAnonymous"> ìµëª…ìœ¼ë¡œ ì‘ì„±</label>
    <textarea id="postText" placeholder="ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”"></textarea>
    <div class="actions">
     <button class="btn primary" id="postAddBtn">ê¸€ ì˜¬ë¦¬ê¸°</button>
    </div>
   </div>
   <div id="postBoard">
    <div class="small">ì•„ì§ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
   </div>
  </section>
 </main>

 <footer>
  <div class="foot-note">â€» ë°ëª¨ ë²„ì „. Google Sheets ì—°ë™ ê°€ëŠ¥</div>
 </footer>
</div>

<script src="script.js"></script>
<script id="jsbin-javascript">
// ê¸°ë³¸ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤
const KEY_ROUTINE = 'fv_myRoutine';
const KEY_POSTIT = 'fv_postit';

// ğŸš¨ ë§ˆìŠ¤í„° í‚¤ ì„¤ì • (ê´€ë¦¬ìë§Œ ì•„ëŠ” ë¹„ë°€ë²ˆí˜¸ - ë°˜ë“œì‹œ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ì„¸ìš”!)
const MASTER_KEY = 'master1234'; 

let routines = JSON.parse(localStorage.getItem(KEY_ROUTINE) || '[]');
let postits = JSON.parse(localStorage.getItem(KEY_POSTIT) || '[]');

const $ = (s) => document.querySelector(s);
const $$ = (s) => Array.from(document.querySelectorAll(s));
function uid(len = 6) { return Math.random().toString(36).slice(2, 2 + len); }

// ì´ˆê¸° ë¡œë“œ
function boot() {
    // ì´ˆê¸° íƒ­ ì„¤ì •: ë‚˜ì˜ ë£¨í‹´ íŒ¨ë„ë§Œ ë³´ì´ê²Œ
    $('#myRoutinePanel').style.display = 'block';
    $('#othersRoutinePanel').style.display = 'none';
    $('#communityPanel').style.display = 'none';

    renderOthersRoutine();
    renderPostits();
}
boot();

// ì¹´í…Œê³ ë¦¬ íƒ­
$$('.cat-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const cat = btn.dataset.cat;
        $$('.cat-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // í•´ë‹¹ íŒ¨ë„ë§Œ ë³´ì´ê²Œ ì „í™˜
        $('#myRoutinePanel').style.display = cat === 'myRoutine' ? 'block' : 'none';
        $('#othersRoutinePanel').style.display = cat === 'othersRoutine' ? 'block' : 'none';
        $('#communityPanel').style.display = cat === 'community' ? 'block' : 'none';
        
        // ë‹¤ë¥¸ ì‚¬ëŒ ë£¨í‹´ íƒ­ í´ë¦­ ì‹œ í†µê³„ ë‹¤ì‹œ ë Œë”ë§
        if (cat === 'othersRoutine') {
            renderRoutineStats();
        }
    });
});

// ë‚˜ì˜ ë£¨í‹´ ì œì¶œ
$('#myRoutineForm').addEventListener('submit', e => {
    e.preventDefault();
    const data = {
        q1: e.target.q1.value,
        q2: e.target.q2.value,
        q3: e.target.q3.value,
        q4: e.target.q4.value,
        q5: e.target.q5.value,
        id: uid(),
        created: new Date().toISOString()
    };
    routines.push(data);
    localStorage.setItem(KEY_ROUTINE, JSON.stringify(routines));
    alert('ë£¨í‹´ ì œì¶œ ì™„ë£Œ!');
    e.target.reset();
    renderOthersRoutine(); // ë£¨í‹´ ì œì¶œ í›„ ë°”ë¡œ ë‹¤ë¥¸ ë£¨í‹´ ëª©ë¡ ì—…ë°ì´íŠ¸
    renderRoutineStats(); // í†µê³„ë„ ì—…ë°ì´íŠ¸
});

// ë‚˜ì˜ ë£¨í‹´ ì´ˆê¸°í™”
$('#resetMyRoutine').addEventListener('click', () => $('#myRoutineForm').reset());

// ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ë£¨í‹´ í†µê³„ ë Œë”ë§ í•¨ìˆ˜ ì¶”ê°€
function renderRoutineStats() {
    const statsContent = $('#statsContent');
    if (!routines.length) {
        statsContent.innerHTML = '<p>ë£¨í‹´ ë°ì´í„°ê°€ ì¶©ë¶„ì¹˜ ì•ŠìŠµë‹ˆë‹¤.</p>';
        return;
    }

    let totalFocusTime = 0;
    const q1Counts = {}; // Q1 ë‹µë³€ë³„ ì¹´ìš´íŠ¸

    routines.forEach(r => {
        totalFocusTime += parseInt(r.q3) || 0; // q3ì€ ìˆ«ìì—¬ì•¼ í•¨
        q1Counts[r.q1] = (q1Counts[r.q1] || 0) + 1;
    });

    const averageFocusTime = (totalFocusTime / routines.length).toFixed(1);

    // ê°€ì¥ ë§ì€ Q1 ë‹µë³€ ì°¾ê¸°
    let mostCommonQ1 = '';
    let maxCount = 0;
    for (const q in q1Counts) {
        if (q1Counts[q] > maxCount) {
            maxCount = q1Counts[q];
            mostCommonQ1 = q;
        }
    }

    statsContent.innerHTML = `
        <p>ì´ ë£¨í‹´ ì°¸ì—¬ì ìˆ˜: <strong>${routines.length}ëª…</strong></p>
        <p>í‰ê·  ìµœëŒ€ ì§‘ì¤‘ ì‹œê°„: <strong>${averageFocusTime}ë¶„</strong></p>
        <p>ê°€ì¥ ë§ì€ ì§‘ì¤‘ ì„±í–¥: <strong>${mostCommonQ1}</strong> (${maxCount}ëª…)</p>
    `;
}

// ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ë£¨í‹´ ë Œë”ë§ (ê°€ë…ì„± ê°œì„  ë° í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€)
function renderOthersRoutine() {
    const board = $('#othersRoutineBoard');
    board.innerHTML = '';
    if (!routines.length) { board.innerHTML = '<div class="small">ì•„ì§ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ë£¨í‹´ì´ ì—†ìŠµë‹ˆë‹¤.</div>'; return; }
    
    // ë£¨í‹´ì„ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬
    const sortedRoutines = [...routines].sort((a, b) => new Date(b.created) - new Date(a.created));

    sortedRoutines.forEach(r => {
        const div = document.createElement('div');
        div.className = 'postit routine-item'; 
        
        // ê°„ê²°í•œ ë¯¸ë¦¬ ë³´ê¸°
        div.innerHTML = `
            <div class="routine-summary">
                <p><strong>ì§‘ì¤‘ ì„±í–¥:</strong> ${r.q1}</p>
                <p><strong>ìµœëŒ€ ì§‘ì¤‘ ì‹œê°„:</strong> ${r.q3}ë¶„</p>
                <p><strong>ë‚˜ë§Œì˜ íŒ (ë¯¸ë¦¬ ë³´ê¸°):</strong> ${r.q4.substring(0, 50)}${r.q4.length > 50 ? '...' : ''}</p>
            </div>
            <div class="meta small">${new Date(r.created).toLocaleDateString()} ì‘ì„±</div>
        `;
        board.appendChild(div);

        // í´ë¦­ ì‹œ ìƒì„¸ ë³´ê¸° ëª¨ë‹¬(ìƒˆ ì°½) ë„ìš°ê¸°
        div.addEventListener('click', () => {
            showRoutineDetail(r);
        });
    });
}

// ë£¨í‹´ ìƒì„¸ ë³´ê¸° ê¸°ëŠ¥ (ìƒˆ ì°½ì„ ëª¨ë‹¬ì²˜ëŸ¼ í™œìš©)
function showRoutineDetail(routine) {
    const detailHTML = `
        <h2>ë£¨í‹´ ìƒì„¸ ë³´ê¸°</h2>
        <p><strong>1) ì§‘ì¤‘ ì„±í–¥:</strong> ${routine.q1}</p>
        <p><strong>2) ë£¨í‹´:</strong> ${routine.q2.replace(/\n/g, '<br>')}</p>
        <p><strong>3) ìµœëŒ€ ì§‘ì¤‘ ì‹œê°„:</strong> ${routine.q3}ë¶„</p>
        <p><strong>4) ë‚˜ë§Œì˜ ë°©ë²•/íŒ:</strong> ${routine.q4.replace(/\n/g, '<br>')}</p>
        <p><strong>5) ì§‘ì¤‘ì´ ì•ˆë˜ëŠ” ì´ìœ :</strong> ${routine.q5.replace(/\n/g, '<br>')}</p>
        <hr>
        <p class="small">ì‘ì„±ì¼: ${new Date(routine.created).toLocaleDateString()}</p>
    `;
    
    const detailWindow = window.open("", "_blank", "width=450,height=600,scrollbars=yes");
    detailWindow.document.write(
        `<!DOCTYPE html>
        <html lang="ko">
        <head>
            <title>ë£¨í‹´ ìƒì„¸</title>
            <style>
                body { padding: 20px; font-family: sans-serif; line-height: 1.6; }
                h2 { border-bottom: 2px solid #eee; padding-bottom: 5px; }
                strong { display: inline-block; width: 150px; }
            </style>
        </head>
        <body>${detailHTML}</body>
        </html>`
    );
    detailWindow.document.close();
}

// ì»¤ë®¤ë‹ˆí‹° ê¸€ ì‘ì„± (ë¹„ë°€ë²ˆí˜¸ ê¸°ëŠ¥ ì¶”ê°€)
$('#postAddBtn').addEventListener('click', () => {
    const text = $('#postText').value.trim();
    
    if (!text) return alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
    
    // ğŸ“¢ ê¸€ ì‚­ì œ/ìˆ˜ì •ìš© ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ìš”ì²­
    const password = prompt('ê¸€ì„ ì‚­ì œí•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); 
    if (!password) return alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.'); 

    const nick = $('#postAnonymous').checked ? 'ìµëª…' : ($('#postNick').value.trim() || 'ìµëª…');
    
    // postits ê°ì²´ì— password í•„ë“œ ì¶”ê°€
    postits.push({ id: uid(), nick, text, password, comments: [], report: 0, created: new Date().toISOString() }); 
    
    localStorage.setItem(KEY_POSTIT, JSON.stringify(postits));
    $('#postText').value = '';
    // ë‹‰ë„¤ì„ í•„ë“œëŠ” ìœ ì§€í•˜ì—¬ ë‹¤ìŒ ëŒ“ê¸€/ê¸€ ì‘ì„± ì‹œ ì¬í™œìš©
    // $('#postNick').value = ''; 
    $('#postAnonymous').checked = false; // ìµëª… ì²´í¬ í•´ì œ
    renderPostits();
});

// ì»¤ë®¤ë‹ˆí‹° ë Œë”ë§ (ì‚­ì œ ê¸°ëŠ¥ ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ë° ë§ˆìŠ¤í„° í‚¤ ë¡œì§ ì¶”ê°€, ëŒ“ê¸€ ë‹‰ë„¤ì„/ì‘ì„±ì êµ¬ë³„ ê°œì„ )
function renderPostits() {
    const board = $('#postBoard');
    board.innerHTML = '';
    if (!postits.length) { board.innerHTML = '<div class="small">ì•„ì§ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>'; return; }
    
    const reversedPostits = [...postits].reverse();

    reversedPostits.forEach(p => {
        const div = document.createElement('div');
        div.className = 'postit';
        div.dataset.id = p.id;
        div.innerHTML = `
            <div>${p.text}</div>
            <div class="meta">
                <span>${p.nick}</span>
                <span>
                    <button class="del">ì‚­ì œ</button>
                    <button class="report">ğŸš¨${p.report}</button>
                </span>
            </div>
            <div class="comment-list"></div>
            <div class="comment-form">
                <input type="text" class="comment-input" placeholder="ëŒ“ê¸€ ì‘ì„± (ë‹‰ë„¤ì„ ìë™ ì…ë ¥)">
                <input type="password" class="comment-password" placeholder="ë¹„ë°€ë²ˆí˜¸">
                <label><input type="checkbox" class="comment-anonymous"> ìµëª…</label>
                <button class="comment-add">ì‘ì„±</button>
            </div>
        `;
        board.appendChild(div);

        // ê¸€ ì‘ì„± ì‹œ ì…ë ¥í–ˆë˜ ë‹‰ë„¤ì„ìœ¼ë¡œ ëŒ“ê¸€ ë‹‰ë„¤ì„ í•„ë“œ ë¯¸ë¦¬ ì±„ìš°ê¸°
        if ($('#postNick').value.trim()) {
             div.querySelector('.comment-input').value = $('#postNick').value.trim();
        } else if(p.nick !== 'ìµëª…') { // ê¸€ì“´ì´ ë‹‰ë„¤ì„ì´ ìµëª…ì´ ì•„ë‹ˆë©´
            $('#postNick').value = p.nick; // ê¸€ì“´ì´ ë‹‰ë„¤ì„ì„ ì „ì—­ ë‹‰ë„¤ì„ í•„ë“œì— ì„¸íŒ…
            div.querySelector('.comment-input').value = p.nick; // ëŒ“ê¸€ ë‹‰ë„¤ì„ í•„ë“œì—ë„ ì„¸íŒ…
        }


        // ğŸš¨ ê¸€ ì‚­ì œ (ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë° ë§ˆìŠ¤í„° í‚¤ ë¡œì§ ì¶”ê°€)
        div.querySelector('.del').addEventListener('click', () => {
            const inputPassword = prompt('ê¸€ì„ ì‚­ì œí•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            if (!inputPassword) return; // ì·¨ì†Œ

            // **ë§ˆìŠ¤í„° í‚¤ ë˜ëŠ” ì‘ì„±ì ë¹„ë°€ë²ˆí˜¸ í™•ì¸**
            if (inputPassword === MASTER_KEY || inputPassword === p.password) { 
                if (confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    postits = postits.filter(pt => pt.id !== p.id);
                    localStorage.setItem(KEY_POSTIT, JSON.stringify(postits));
                    renderPostits();
                }
            } else {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        });

        // ì‹ ê³  (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
        div.querySelector('.report').addEventListener('click', () => {
            p.report++;
            localStorage.setItem(KEY_POSTIT, JSON.stringify(postits));
            renderPostits();
        });

        // ëŒ“ê¸€ ì‘ì„± (ë¹„ë°€ë²ˆí˜¸ í•„ë“œ ì¶”ê°€ ë°˜ì˜, ë‹‰ë„¤ì„ ê°œì„ )
        div.querySelector('.comment-add').addEventListener('click', () => {
            const val = div.querySelector('.comment-input').value.trim();
            const pass = div.querySelector('.comment-password').value.trim(); // ë¹„ë°€ë²ˆí˜¸ ê°’
            
            if (!val) return;
            if (!pass) return alert('ëŒ“ê¸€ ì‚­ì œë¥¼ ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            
            const anon = div.querySelector('.comment-anonymous').checked;
            
            // ì „ì—­ ë‹‰ë„¤ì„ í•„ë“œì—ì„œ ë‹‰ë„¤ì„ì„ ê°€ì ¸ì˜¤ê³ , ìµëª… ì—¬ë¶€ì— ë”°ë¼ ì²˜ë¦¬
            const commentNick = anon ? 'ìµëª…' : ($('#postNick').value.trim() || 'ìµëª…');
            
            // ëŒ“ê¸€ ê°ì²´ì— password í•„ë“œ ì¶”ê°€
            p.comments.push({ id: uid(), nick: commentNick, text: val, password: pass, created: new Date().toISOString() }); 
            
            localStorage.setItem(KEY_POSTIT, JSON.stringify(postits));
            
            // ëŒ“ê¸€ í¼ ì´ˆê¸°í™”
            div.querySelector('.comment-input').value = '';
            div.querySelector('.comment-password').value = '';
            div.querySelector('.comment-anonymous').checked = false;
            
            renderPostits(); // ëŒ“ê¸€ ì‘ì„± í›„ ë‹¤ì‹œ ë Œë”ë§í•˜ì—¬ ìƒˆ ëŒ“ê¸€ ë°˜ì˜
        });

        // ëŒ“ê¸€ ë Œë”ë§ (ëŒ“ê¸€ ì‚­ì œ ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ë° ë§ˆìŠ¤í„° í‚¤ ë¡œì§ ì¶”ê°€, ì‘ì„±ì ëŒ“ê¸€ êµ¬ë³„)
        const commentList = div.querySelector('.comment-list');
        p.comments.forEach(c => {
            const cdiv = document.createElement('div');
            cdiv.className = 'comment';
            
            // ê¸€ ì‘ì„±ìì™€ ëŒ“ê¸€ ì‘ì„±ìì˜ ë‹‰ë„¤ì„ì´ ê°™ìœ¼ë©´ 'author-comment' í´ë˜ìŠ¤ ì¶”ê°€
            if (c.nick === p.nick && p.nick !== 'ìµëª…') { // ìµëª…ì€ êµ¬ë³„í•˜ì§€ ì•ŠìŒ
                cdiv.classList.add('author-comment');
            }

            cdiv.innerHTML = `<span>${c.nick}: ${c.text}</span> <button class="c-del" data-comment-id="${c.id}">ì‚­ì œ</button>`; 
            commentList.appendChild(cdiv);
            
            // ëŒ“ê¸€ ì‚­ì œ
            cdiv.querySelector('.c-del').addEventListener('click', () => {
                const inputPassword = prompt('ëŒ“ê¸€ì„ ì‚­ì œí•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                if (!inputPassword) return; // ì·¨ì†Œ

                // **ë§ˆìŠ¤í„° í‚¤ ë˜ëŠ” ì‘ì„±ì ë¹„ë°€ë²ˆí˜¸ í™•ì¸**
                if (inputPassword === MASTER_KEY || inputPassword === c.password) {
                    p.comments = p.comments.filter(cc => cc.id !== c.id);
                    localStorage.setItem(KEY_POSTIT, JSON.stringify(postits));
                    renderPostits();
                } else {
                    alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }
            });
        });
    });
}
</script>
</body>
</html>